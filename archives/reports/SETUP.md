# מדריך התקנה ושימוש - AntiGravity Claude Proxy

מדריך זה יעזור לך להגדיר את שרת הפרוקסי עבור Claude Code עם תמיכה במספר חשבונות Google.

## ✅ דרישות קדם

- **Node.js**: גרסה 18 ומעלה (כבר נבדק ונמצא תקין).
- **חשבונות Google**: גישה ל-3 החשבונות שברצונך לחבר.

## 🚀 שלב 1: התקנה (בוצע)

הכלי הותקן גלובלית באמצעות `npm`, וקוד המקור גובה לתיקיית `tools/antigravity-proxy`.

## 🔑 שלב 2: הגדרת חשבונות (נדרשת פעולה ידנית)

השרת תומך במספר חשבונות ומבצע מעבר אוטומטי ביניהם במקרה של חסימה (Rate Limit).

עליך להריץ את הפקודה הבאה **3 פעמים**, פעם אחת עבור כל חשבון:

```bash
antigravity-claude-proxy accounts add
```

בכל פעם ייפתח דפדפן לאישור הגישה. לאחר האישור, החשבון יישמר מאובטחת במחשבך.

לצפייה בחשבונות המוגדרים:

```bash
antigravity-claude-proxy accounts list
```

## ⚙️ שלב 3: הפעלה אוטומטית

הכנתי סקריפט אוטומטי שיתקין את השרת כ-Service שרץ ברקע תמיד (גם לאחר הפעלה מחדש של המחשב).

הרץ את הפקודה הבאה בטרמינל:

```bash
chmod +x install_proxy.sh && ./install_proxy.sh
```

סקריפט זה:

1. יעתיק את הגדרות ה-Startup ל-`~/Library/LaunchAgents`.
2. יפעיל את השירות מיידית.
3. יוסיף את משתני הסביבה `ANTHROPIC_BASE_URL` לקובץ `.zshrc` שלך.

## 🖥️ שלב 4: שימוש ב-Claude Code

לאחר הרצת הסקריפט וביצוע `source ~/.zshrc`, כלי ה-CLI של Claude (וכל כלי אחר המשתמש ב-Anthropic API) יפנה אוטומטית לשרת המקומי שלך בכתובת `http://localhost:8080`.

אין צורך בהגדרות נוספות.

## 🛠️ פתרון תקלות ופקודות שימושיות

**בדיקת סטטוס השרת:**

```bash
curl http://localhost:8080/health
# צריך להחזיר: {"status":"ok","accounts":3}
```

**צפייה בלוגים (במקרה של תקלה):**

```bash
tail -f /tmp/antigravity-proxy.log
```

**הסרת כל החשבונות (איפוס):**

```bash
antigravity-claude-proxy accounts clear
```

**גיבוי הגדרות:**
ההגדרות (כולל הטוקנים) נשמרות בדר"כ בתיקיית הבית תחת `.config/antigravity-proxy` או `.antigravity/config.json`. מומלץ לגבות קובץ זה ידנית אם עוברים מחשב.

בהצלחה! 🚀
